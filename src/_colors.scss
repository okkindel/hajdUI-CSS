$intensities: (50, 100, 200, 300, 400, 500, 600, 700, 800, 900);
$opacities: (10, 20, 30, 40, 50, 60, 70, 80, 90);

@function generate-variants($color, $intensity) {
  @if $intensity < 500 {
    $color: lighten($color, (500 - $intensity) * 0.1%);
  } @else if $intensity > 500 {
    $color: darken($color, ($intensity - 500) * 0.1%);
  } @else {
    $color: $color;
  }
  @return $color;
}

@each $key, $val in $colors {
  .#{$key} {
    color: $val;
  }
  .hover:#{$key} {
    &:hover {
      color: $val;
    }
  }
  .bg-#{$key} {
    background-color: $val;
  }
  @each $i in $intensities {
    .#{$key}-#{$i} {
      color: generate-variants($val, $i);
    }
    .hover#{$separator}#{$key}-#{$i} {
      &:hover {
        color: generate-variants($val, $i);
      }
    }
    .bg-#{$key}-#{$i} {
      background-color: generate-variants($val, $i);
    }

    @each $o in $opacities {
      .#{$key}-#{$i}#{$separator}#{$o} {
        color: rgba(generate-variants($val, $i), calc($o / 100));
      }
      .hover#{$separator}#{$key}-#{$i}#{$separator}#{$o} {
        &:hover {
          color: rgba(generate-variants($val, $i), calc($o / 100));
        }
      }
      .bg-#{$key}-#{$i}#{$separator}#{$o} {
        background-color: rgba(generate-variants($val, $i), calc($o / 100));
      }
    }
  }
}
